{% extends 'base.html' %}

{% block content %}

    <h4><b>Titre:</b> {{ object.title }}</h4>
    <p><b>Auteur:</b> 
        {% if not object.author.get_full_name %}
            {{object.author.get_username}}
        {% else %}
            {{ object.author.get_full_name }}
        {% endif %}
        </p>
    <p><b>Publié le:</b> {{ object.create_stamp }}</p>
    <p><b>Prix:</b> {{ object.price }}$</p>
    <p><b>Résumé:</b> {{ object.summary }}</p>

    {% if object.author == user %}
        <a href="{% url 'books:book-delete' object.id %}" class="btn btn-danger">Supprimer le livre</a>
    {% else %}
        <a href="" class="btn btn-primary">J'aime <i class="fas fa-heart"></i></a>
    {% endif %}

    <hr>
    <h3>Commentaires</h3>

    {% load crispy_forms_tags %}
    <form method="POST" action="{% url 'comments:comment-create' object.id %}">
        {% csrf_token %}
        {{ comment_form|crispy }}

        <input type="reset" name="reset" value="Réinitialiser" class="btn btn-danger">
        <input type="submit" name="submit" class="btn btn-primary" value="Ajouter un commentaire">
    </form>

    <hr>
    
	{% for comment in comment_list %}
        <div style="background-color: white; padding: 10px; margin-bottom: 5px">
            {% if comment.anonymous %}
                <p><em>{{ comment.author }}</em></p>
            {% else %}
                <p><em>Anonyme</em></p>
            {% endif %}
            <p><b>{{ comment.title }}</b></p>
            <p>{{ comment.content }}</p>
        </div>
        {% empty %}
        <div>Aucun commmentaire</div>
	{% endfor %}

{% endblock %}